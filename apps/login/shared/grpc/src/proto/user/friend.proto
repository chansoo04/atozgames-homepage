syntax = "proto3";

package user;

import "user-common.proto";

service FriendService {
  rpc RefreshMyProfile (RefreshMyProfileRequest) returns (DefaultResponse); // 내 프로필 새로고침

  rpc SendRequest (SendReqRequest) returns (FriendReqResponse); // 친구요청
  rpc CancelRequest (FriendReqRequest) returns (DefaultResponse); // 친구요청 취소
  rpc RejectRequest (FriendReqRequest) returns (DefaultResponse); // 친구요청 거절
  rpc AcceptRequest (FriendReqRequest) returns (FriendShipResponse); // 친구요청 수락
  rpc RemoveFriend (FriendShipRequest) returns (DefaultResponse); // 친구 삭제

  rpc SendRequestList (ListRequest) returns (FriendRequestListResponse); // 보낸 친구 요청 리스트
  rpc ReceiveRequestList (ListRequest) returns (FriendRequestListResponse); // 받은 친구 요청 리스트
  rpc FriendList (ListRequest) returns (FriendListResponse); // 친구 리스트
  rpc FindFriend (FindFriendRequest) returns (FriendListResponse); // 친구 찾기

  rpc BlockList (ListRequest) returns (BlockListResponse); // 차단 리스트
  rpc Block (BlockRequest) returns (DefaultResponse); // 차단
  rpc Unblock (BlockRequest) returns (DefaultResponse); // 차단 해제

  rpc JoinedFriend (JoinFriendRequest) returns (FriendShipResponse); // 초대한 친구 추가
  rpc JoinedFriendList (ListRequest) returns (JoinFriendListResponse); // 초대로 추가된 친구 리스트

  // rpc SendDailyGift (FriendShipRequest) returns (DefaultResponse); // 일일 친구 선물 보내기
  // rpc ReceiveDailyGift (FriendShipRequest) returns (DefaultResponse); // 일일 친구 선물 받기
}

message RefreshMyProfileRequest {
  string account_id = 1; // 요청하는 사람
  Friend profile = 2; // 내 프로필 정보
}

message SendReqRequest {
  string account_id = 1; // 요청하는 사람
  string friend_id = 2; // 요청받는 사람
  string message = 3; // 요청 메시지
}

message FriendReqResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  string friend_req_id = 3; // 친구 요청 ID
  string friend_ship_id = 4; // 친구 ID
}

message FriendReqRequest {
  string friend_req_id = 1; // 친구 요청 ID
}

message FriendShipRequest {
  string friend_ship_id = 1; // 친구 관계 ID
}

message FriendShipResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  string friend_ship_id = 3;
}

message ListRequest {
  string account_id = 1;
}

message FriendRequestListResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  repeated FriendRequest friend_request = 3; // 요청 리스트
}

message FindFriendRequest {
  string account_id = 1; // 요청하는 사람
  string keyword = 2; // 검색 키워드
}

message FriendListResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  repeated Friend friend = 3; // 친구 리스트
}

message BlockRequest {
  string block_id = 1; // 차단 ID
  string account_id = 2; // 요청하는 사람
  string block_account_id = 3; // 차단할 사람
}

message BlockListResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  repeated Block block = 3; // 차단 리스트
}

message JoinFriendRequest {
  string account_id = 1; // 요청하는 사람
  string code = 2; // 친구 코드
}

message JoinFriendListResponse {
  bool success = 1; // 성공 여부
  string error_message = 2; // 에러 메시지
  int32 count = 3; // 초대로 추가된 친구 수
  repeated Friend friend = 4; // 친구 리스트
}
